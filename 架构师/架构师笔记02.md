# 智能互联网核心技术实现

## 高可用设计手段

### 什么是高可用

	7* 24小时不间断服务，任何人、时间、地点，任何服务，都能获得预期结果
### 为什么要高可用

硬件

* 有生命周期，会发生故障、会老化。
* 网络抖动或划分

软件

* bugs
* 性能极限
* 软件间相互影响

### 传统高可用评估方式

一段时间（例如一年）的停机时间占比   

停机时间/总运行时间

* 1个9 90% 停机时间不超过880小时/年
* 2个9 停机时间不超过88小时/年
* 3个9 停机时间不超过9小时/年
* 4个9 停机时间不超过53分钟/年
* 5个9 停机时间不超过6分钟/年

### 科学可用评估方式

一段时间（例如一年）停机影响的请求量占比

停机时间影响请求量/总的请求量


### 微服务高可用设计手段

* 服务冗余  --- 无状态化
* 负责均衡  --- 幂等设计
* 超时机制  --- 异步化设计
* 服务限流降级熔断 --- 数据复制/缓存/Sharding
* 架构拆分  --- 服务治理


### 服务实时监控

![服务实时监控](https://github.com/richenlin/DayDayUp/raw/master/%E6%9E%B6%E6%9E%84%E5%B8%88/%E6%9C%8D%E5%8A%A1%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7.png)

基于日志进行分析，日志内容包含请求耗时以及状态，通过日志收集，以及流计算程序来进行实时计算和监控。还可以沉淀到时序数据库，进行综合环比分析


### 服务分级


	
* 高并发设计手段
* 服务无状态化设计
* 服务负载均衡设计
* 服务幂等设计
* 分布式锁设计
* 分布式事务设计
* 服务降级设计
* 服务限流/熔断设计
* 服务灰度发布设计
* 服务全链路压测设计
* 亿级真实案例实战