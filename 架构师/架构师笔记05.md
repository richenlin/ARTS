# 架构师笔记05

## 服务无状态化设计

### 服务无状态化定义

* 冗余部署的多个模块（进程）完全对等
* 请求提交到冗余部署的任一模块，处理结果完全一样
* 模块不存储业务的上下文信息
* 仅根据每次请求携带数据进行相应的业务逻辑处理

### 服务无状态化目的

* 快速扩容服务
* 弹性缩容服务

### 服务无状态化案例

* 用户session数据

  * 登录方式 用户名+密码

  * 成功凭证 （session）

    AES(UID + Timestmap + 校验码)

* 用户session存储 可以放在网关层（鉴权功能）

* 如何存放  

  * 外部存储 redis集群 (根据场景要考虑分片)
  * 存储在客户端（JWT）主动超时机制问题（需要做超时补偿）



