# 微服务架构演进



常见的微服务系统包括应用管理、数据化运营以及服务注册发现



Consul + kong 

## consul

存在的问题（缺少的特性）：

* 多租户
* 隔离性
* 授权
* namespace

采用了Consul-Access组件来扩展，实现多租户

* 服务注册请求被翻译成KV请求，存储在server上
* 心跳请求被翻译成KV请求，存储在server上
* 服务发现请求会将服务注册的KV内容和心跳KV内容合并返回

服务发现优化：

* 改为watch机制
* 增加本地缓存
* 零实例保护，在客户端做兜底容错

心跳优化：

* 减少timeout，一般设置5秒左右
* 增加重试机制，重试 1/2 + 1次

